<div class="detail">

    <div ng-if="!container.edit">
        <h3>Pipeline: {{ container.Config | tagnameOnly }}</h4>
        <h4>Username: {{ container.Name }}
            <button class="btn btn-primary btn-xs" id="rename_btn"
                    ng-click="container.edit = true;">Rename
            </button>
        </h3>
    </div>
    <div ng-if="container.edit">
        <h4>
            Enter Your Name/ID:
            <input type="text" id="rename_input" ng-model="container.newContainerName">
            <button class="btn btn-success"
                    ng-click="renameContainer()">Save
            </button>
            <button class="btn btn-danger"
                    ng-click="container.edit = false;">&times;</button>
        </h4>
    </div>

    <div class="btn-group detail">
        <button class="btn btn-success"
                ng-click="start()"
                ng-show="!container.State.Running && !container.edit">Start pipeline
        </button>
        <button class="btn btn-info"
                ng-click="pause()"
                ng-show="container.State.Running && !container.State.Paused">Pause pipeline
        </button>
        <button class="btn btn-success"
                ng-click="unpause()"
                ng-show="container.State.Running && container.State.Paused">Unpause pipeline
        </button>
        <button class="btn btn-warning"
                ng-click="stop()"
                ng-show="container.State.Running && !container.State.Paused">Save/Stop pipeline
        </button>
        <button class="btn btn-danger"
                ng-click="kill()"
                ng-show="container.State.Running && !container.State.Paused">Disregard/Stop pipeline
        </button>
        <button class="btn btn-primary"
                ng-click="restart()"
                ng-show="container.State.Running && !container.State.Stopped">Restart pipeline
        </button>
    </div>

    <table class="table table-striped">
        <tbody>
        <tr>
            <td>State:</td>
            <td>
                <li>
                    <span class="label {{ container.State|getstatelabel }}">{{ container.State|getstatetext }}</span>
                </li>
            </td>
        </tr>
        <tr>
            <td>Environment:</td>
            <td>
                <div ng-show="!editEnv">
                    <button class="btn btn-default btn-xs pull-right" ng-click="editEnv = false"><!--<i class="glyphicon glyphicon-pencil"></i>--></button>
                    <ul>
                        <li ng-repeat="k in container.Config.Env">{{ k }}</li>
                    </ul>
                </div>
                <div class="form-group" ng-show="editEnv">
                    <label>Env:</label>

                    <div ng-repeat="envar in newCfg.Env">
                        <div class="form-group form-inline">
                            <div class="form-group">
                                <label class="sr-only">Variable Name:</label>
                                <input type="text" ng-model="envar.name" class="form-control input-sm"
                                       placeholder="NAME"/>
                            </div>
                            <div class="form-group">
                                <label class="sr-only">Variable Value:</label>
                                <input type="text" ng-model="envar.value" class="form-control input-sm" style="width: 400px"
                                       placeholder="value"/>
                            </div>
                            <div class="form-group">
                                <button class="btn btn-danger btn-sm input-sm form-control"
                                        ng-click="rmEntry(newCfg.Env, envar)"><i class="glyphicon glyphicon-remove"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-success btn-sm"
                            ng-click="addEntry(newCfg.Env, {name: '', value: ''})"><i class="glyphicon glyphicon-plus"></i> Add
                    </button>
                    <button class="btn btn-primary btn-sm"
                            ng-click="restartEnv()"
                            ng-show="!container.State.Restarting">Commit and restart</button>
                </div>


            </td>
        </tr>
        <tr>
            <td>Internal Port:</td>
            <td>
                <li ng-repeat="(k, v) in container.Config.ExposedPorts">{{ k }}</li>
            </td>
        </tr>
        <tr>
            <td>Exposed Port:</td>
            <td>
                <li ng-repeat="(containerport, hostports) in container.HostConfig.PortBindings">
                    <span ng-repeat="(k,v) in hostports">{{ v.HostPort }}/tcp</span>
                </li>
            </td>
        </tr>
        <tr>
            <td>Bindings:</td>
            <td>
                <div ng-show="!editBinds">
                    <button class="btn btn-default btn-xs pull-right" ng-click="editBinds=false"><!-- <i class="glyphicon glyphicon-pencil"></i> --></button>
                    <ul>
                        <li ng-repeat="b in container.HostConfig.Binds">{{ b }}</li>
                    </ul>
                </div>
                <div ng-show="editBinds">
                    <div ng-repeat="(vol, b) in newCfg.Binds" class="form-group form-inline">
                        <div class="form-group">
                            <input type="text" ng-model="b.HostPath" class="form-control input-sm"
                                   placeholder="Host path or volume name" style="width: 250px;" />
                        </div>
                        <div class="form-group">
                            <input type="text" ng-model="b.ContPath" ng-readonly="b.DefaultBind" class="form-control input-sm" placeholder="Container path" />
                        </div>
                        <div class="form-group">
                            <label><input type="checkbox" ng-model="b.ReadOnly" /> read only</label>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-danger btn-sm input-sm form-control"
                                    ng-click="rmEntry(newCfg.Binds, b)"><i class="glyphicon glyphicon-remove"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-success btn-sm"
                            ng-click="addEntry(newCfg.Binds, { ContPath: '', HostPath: '', ReadOnly: false, DefaultBind: false })"><i class="glyphicon glyphicon-plus"></i> Add
                    </button>
                    <button class="btn btn-primary btn-sm"
                            ng-click="restartEnv()"
                            ng-show="!container.State.Restarting">Commit and restart</button>

                </div>
            </td>
        </tr>
        <tr>
            <td>Galaxy Server:</td>
            <td id="galaxy_server_info">
                <li ng-repeat="(containerport, hostports) in container.HostConfig.PortBindings">
                    <h4><span class="label label-primary" ng-repeat="(k,v) in hostports"><a href="http://{{ v.HostIp }}:{{ v.HostPort }}" target="_blank" style="color: white">{{ v.HostIp }}:{{ v.HostPort }}</a></span></h4>
                </li>
            </td>
        </tr>
        <tr>
            <td>Output / Error messages:</td>
            <td>
                <li>
                    <a href="#/containers/{{ container.Id }}/logs">Output / Error messages</a>
                </li>
            </td>
        </tr>
        <tr>
            <td>System Stats:</td>
            <td>
                <li>
                    <a href="#/containers/{{ container.Id }}/stats">Stats</a>
                </li>
            </td>
        </tr>
</div>


